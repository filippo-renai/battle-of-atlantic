<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>BOA</title>
</head>

<body style="background-color:rgb(6, 71, 87);">
    <!-- Title -->
    <div class="container text-center">
        <div class="row">
            <div class="col">
            </div>
            <div class="col-6">
                <h1 style="color:#ffffff">
                    <font face="Courier New, Courier, mono"> BATTLE OF ATLANTIC </font>
                </h1>
            </div>
            <div class="col">
            </div>
        </div>
    </div>
    <br><br>
    <div class="container">
        <div class="row">
            <div class="col-8">
                <p class="lh-1" style="color:#ffffff">
                    <font face="Courier New, Courier, mono">
                        SILURISTA: <br>
                        "CAPITANO LE RICORDO CHE I NOSTRI MISSILI POSSONO COLPIRE SOLO LA SEGUENTE GRIGLIA:"<br> <br>
                    </font>
                </p>
                <p class="text-center" style="color:#b7bee3">
                    <font face="Courier New, Courier, mono">
                        | 1 | 2 | 3 | <br>
                        | 4 | 5 | 6 | <br>
                        | 7 | 8 | 9 | <br></font>
                </p>
                <br>


            </div>
            <div class="col-4 text-center">

                <p class="text-center" style="color:#ffffff">
                    <font face="Courier New, Courier, mono">CORDINATA:</font>
                </p>
                <input type="email" class="form-control" id="x" placeholder="1">
                <br>
                <p id="nemico" style="color:#f90000">
                    <font face="Courier New, Courier, mono"></font>
                </p>
                <button type="button" class="btn btn-outline-danger btn-lg" onclick="game();">Fuoco</button>
            </div>
        </div>
    </div>

    <br><br><br>
    <!-- Info bottom -->
    <div class="container text-center">
        <div class="row">
            <div class="col">
            </div>
            <div class="col-8">
                <a href="index.html">
                    <button type="button" class="btn btn-outline-info btn-lg">Home</button>
                </a>
            </div>
            <div class="col">
            </div>
        </div>
    </div>
    <br>

    <!-- Footer -->
    <footer class="text-center text-lg-start bg-light text-muted">
        <div class="text-center p-4" style="background-color: rgb(6, 71, 87);">
            <p style="color:#ffffff">
                <font face="Courier New, Courier, mono">
                    Code by Filippo Renai: <a class="text-reset fw-bold"
                        href="https://github.com/filippo-renai">Github</a>
                </font>
            </p>
        </div>
    </footer>


    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script>
        let spari = 0;
        let fine = false;
        let nemico = Math.floor(Math.random() * (9 - 1) + 1);
        async function game() {
            if (document.getElementById("x").value == "") {
                window.alert("You have to enter the cordinate!");
                clean();
            }
            else if (isNaN(document.getElementById("x").value)) {
                window.alert("You must enter a number!");
                clean();
            }
            else if (document.getElementById("x").value < 1 || document.getElementById("x").value > 9) {

                window.alert("You must enter a number between 1 to 5!");
                clean();
            }
            else {
                let bomba = document.getElementById("x").value;
                cleanNormale();
                spari++;

                if (spari == 1)
                    window.alert("Radarista: Colpo di avvertimento effettuato!\nSignore lei è un gentleman, ma cerchiamo di affondarlo dal prossimo colpo");
                // inizio della partita
                else{ 

                    // 1
                    if(nemico== 1){
                        let movimento = Math.floor(Math.random() * (3 - 1) + 1);
                        if(movimento == 1)
                            nemico = 2
                        if(movimento == 2)
                            nemico = 4
                    }

                    // 2 
                    else if(nemico== 2){
                        let movimento = Math.floor(Math.random() * (4 - 1) + 1);
                        if(movimento == 1)
                            nemico = 1
                        if(movimento == 2)
                            nemico = 5
                        if(movimento == 3)
                            nemico = 3
                    }

                    // 3
                    else if(nemico== 3){
                        let movimento = Math.floor(Math.random() * (3 - 1) + 1);
                        if(movimento == 1)
                            nemico = 2
                        if(movimento == 2)
                            nemico = 6
                    }

                    // 4 
                    else if(nemico== 4){
                        let movimento = Math.floor(Math.random() * (4 - 1) + 1);
                        if(movimento == 1)
                            nemico = 1
                        if(movimento == 2)
                            nemico = 5
                        if(movimento == 3)
                            nemico = 7
                    }

                    // 5
                    else if(nemico== 5){
                        let movimento = Math.floor(Math.random() * (5 - 1) + 1);
                        if(movimento == 1)
                            nemico = 2
                        if(movimento == 2)
                            nemico = 4
                        if(movimento == 3)
                            nemico = 6
                        if(movimento == 4)
                            nemico = 8
                    }

                    // 6
                    else if(nemico== 6){
                        let movimento = Math.floor(Math.random() * (4 - 1) + 1);
                        if(movimento == 1)
                            nemico = 3
                        if(movimento == 2)
                            nemico = 5
                        if(movimento == 3)
                            nemico = 9
                    }

                    // 7 
                    else if(nemico== 7){
                        let movimento = Math.floor(Math.random() * (3 - 1) + 1);
                        if(movimento == 1)
                            nemico = 4
                        if(movimento == 2)
                            nemico = 8
                    }

                    // 8 
                    else if(nemico== 8){
                        let movimento = Math.floor(Math.random() * (4 - 1) + 1);
                        if(movimento == 1)
                            nemico = 5
                        if(movimento == 2)
                            nemico = 7
                        if(movimento == 3)
                            nemico = 9
                    }

                    // 9 
                    else if(nemico==9){
                        let movimento = Math.floor(Math.random() * (3 - 1) + 1);
                        if(movimento == 1)
                            nemico = 6
                        if(movimento == 2)
                            nemico = 8
                    }

                    // nostro colpo lo ha affondato
                    if (bomba == nemico) {
                        window.alert("Radarista: Comandante il sottomarino è in fiamme, siamo salvi!");
                        window.location.href = "index.html";
                    }


                    // dopo 4 colpi, il siluro puo' colpire vedere se ci ha colpito
                    if (spari > 4 && spari < 8 && Math.floor(Math.random() * (5 - 1) + 1) == 3) {
                        fine = true;
                        window.alert("Boooomm!!\nRadarista:....\n");
                        window.location.href = "index.html";
                    }
                    // diminuisco le propabilità
                    if (spari >= 8  && spari < 10 && Math.floor(Math.random() * (3 - 1) + 1) == 2) {
                        fine = true;
                        window.alert("Boooomm!!\nRadarista:....\n");
                        window.location.href = "index.html";
                    }

                    if(spari == 10){
                        fine = true;
                        window.alert("Boooomm!!\nRadarista:....\n");
                        window.location.href = "index.html";
                    }

                    if (spari == 3 && fine == false)
                        window.alert("Radarista: Comandante il bersaglio ha mancato l'obiettivo!\nDa questo momento siamo raggiungibili dai loro missili");

                    else if (fine == false)
                        window.alert("Radarista: Comandante il bersaglio ha mancato l'obiettivo!");
                }

            }
        }

    
        async function cleanNormale() {
            document.getElementById("x").value = "";
            document.getElementById('nemico').innerHTML = 'ULTIMO AVVISTAMENTO ALLA POSIZIONE: ' + nemico;

        }

        async function clean() {
            document.getElementById("x").value = "";
        }


    </script>

</body>

</html>